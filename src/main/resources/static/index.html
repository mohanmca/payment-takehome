<!DOCTYPE html>
<html lang="en">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <title>Mars planet</title></head>
<body>
<h1>Rover - workflow</h1>
Crate a randome rover -
<button id="create" onclick="createIt()">Create</button>
<br/>
Number of rovers - <input type="text" name="size"><br/>
Move the rover-id - <input type="text" id="rover_id"><br/>
instructions - <input type="text" id="instruction"><br/>
Result of recent API - <input type="text" id="result"><br/>
<button name="Move" onclick="moveIt()">Move</button>
</body>
<script defer>
    function findSize() {
        const input = Array.from(document.getElementsByName("size"))[0]
        fetch("/rover/size")
            .then((response) => response.text())
            .then((result) => { input.value = result;});

    }

    function createIt() {
        const result = document.getElementById("result")
        const x = Math.floor(Math.random() * 10);
        const y = Math.floor(Math.random() * 10);
        const create_request = `/rover/create?direction=E&x=${x}&y=${y}`;
        console.log(create_request)
        fetch(create_request)
            .then((response) => response.text())
            .then((value) => { result.value = value;});
    }

    function moveIt() {
        const input = document.getElementById("rover_id").value
        const instructions = document.getElementById("instruction").value
        const move_request = `/rover/navigate?id=${input}&commands=${instructions}`;
        console.log(move_request)
        fetch(move_request)
            .then((response) => response.text())
            .then((result) => { input.value = result;});
    }

    findSize();

</script>

</html>
